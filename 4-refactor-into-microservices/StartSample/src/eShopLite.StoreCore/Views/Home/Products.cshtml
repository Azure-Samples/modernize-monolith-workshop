@using eShopLite.StoreCore.Models
@model IEnumerable<Product>
@{
  ViewBag.Title = "Products";
  var products = Model;
}
<main aria-labelledby="title">
  <h2 id="title">@ViewBag.Title</h2>
  <h3>@ViewBag.Message</h3>

  @if (!string.IsNullOrEmpty(ViewBag.Error as string))
  {
    <div class="alert alert-danger" role="alert">
      @ViewBag.Error
    </div>
  }

  @if (products == null || !products.Any())
  {
    <div class="text-center p-4">
      <p class="text-muted"><em>No products available at this time.</em></p>
    </div>
  }
  else
  {
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th scope="col">Product ID</th>
            <th scope="col">Image</th>
            <th scope="col">Details</th>
            <th scope="col">Price (USD)</th>
          </tr>
        </thead>
        <tbody>
          @foreach (var product in products)
          {
            <tr>
              <td>@product.Id</td>
              <td>
                @if (!string.IsNullOrEmpty(product.ImageUrl))
                {
                  <img src="~/Images/@product.ImageUrl" 
                       alt="@product.Name" 
                       class="img-thumbnail" 
                       style="max-width: 150px; height: auto;"
                       loading="lazy">
                }
                else
                {
                  <div class="bg-light p-3 text-center" style="width: 150px; height: 100px;">
                    <small class="text-muted">No Image</small>
                  </div>
                }
              </td>
              <td>
                <strong>@product.Name</strong><br>
                <small class="text-muted">@product.Description</small>
              </td>
              <td class="fw-bold text-success">$@product.Price.ToString("F2")</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</main>
